Asia Pacific markets retraced some losses on Wednesday but remained broadly lower. Earlier, shares tumbled when reports said rockets were fired at an Iraqi airbase that hosts American troops.In Japan, the Nikkei 225 eased from earlier declines of more than 2% to trade down 1.57% at 23,204.76 while the Topix index was down 1.37% at 1,701.40. Japanese Prime Minister Shinzo Abe is said to have canceled a scheduled trip this weekend to the Middle East, according to a local broadcaster, Reuters reported.South Korea's Kospi index was down 1.11% at 2,151.31. Australia's S&P/ASX 200 erased earlier losses to drop 0.13% to 6,817.60.U.S. stock futures declined. Dow Jones Industrial Average futures dropped 162 points and indicated a loss of 184.68 points at Wednesday's open. It fell more than 400 points earlier, on news of Iran's attacks in Iraq, before stabilizing.Chinese mainland markets also traded lower. The Shanghai composite index was down 1.22% at 3,066.89, the Shenzhen composite fell 1.24% to 1,769.58 and the Shenzhen component declined 1.13% to 10,706.87.Hong Kong's Hang Seng index fell 0.83% to 28,087.92. In Singapore, the Straits Times index fell 0.24% â€” Singapore Airlines shares were 0.4% lower as the carrier said it was diverting all flights in and out of Europe from Iranian airspace.Shares in India also fell as the S&P Sensex was down 0.44% and the Nifty 50 declined 0.54%.Iran launched more than a dozen ballistic missiles against multiple bases housing American troops in Iraq, Pentagon officials said on Tuesday. It was not immediately clear if any U.S. service members were hurt in the strikes and President Donald Trump responded on Twitter, saying he will make a statement on Wednesday morning during U.S. hours.The strike follows the U.S. killing of Iran's top general, Qasem Soleimani, last Thursday in Baghdad. Iran had promised retaliation after the attack.Investors did not expect such a swift move from Iran, a senior macro strategist told CNBC's "Street Signs" on Wednesday."Clearly, it's a surprise that we've had this retaliation by the Iranian side so quickly. Most investors expected that any retaliation would be drawn out, didn't expect such a sudden re-escalation of tensions," Mansoor Mohi-Uddin from Natwest Markets said. He added that market watchers will now wait and see how the United States responds to the attacks."We have a little bit of a gap now before Europe (market) opens, where things actually may calm down a little bit. The markets might become a bit more rangebound," he added.European markets opened lower, with the FTSE 100 down 0.45% in early trade.Oil prices jumped following news of the development.U.S. crude futures rose 0.81% to $63.21 a barrel around 4:01 p.m. HK/SIN, after earlier jumping 4%. Global benchmark Brent was up 1.08% to $69.01.Energy names in the region gained: In Australia, Santos shares rose 1.14%, Oil Search rose 0.89% and Woodside Petroleum added 1.43%. Japan's Inpex rose 0.34% and Japan Petroleum was up 0.48%.Spot gold was also up 0.92% to around $1,588.4 an ounce, after earlier rising above 2%. Gold futures for February delivery were up 1% to $1,590.1. The precious metal is considered a safe haven asset.Defense stocks in Asia also surged on Wednesday, some by more than 20%.The U.S. dollar index, which tracks the greenback against a basket of its peers, fell 0.12% to 96.892, down from an earlier high of 96.963.The Japanese yen, another safe-haven asset, traded at 108.4 versus the greenback around 4:03 p.m. HK/SIN. Earlier in the day, the yen strengthened to levels around 107.63 per dollar.In the past, news similar to today's Iranian attacks drew a much stronger reaction in the yen, according to Natwest Markets' Mohi-Uddin. "That probably tells you that those two currencies may not be the best indicators of how the market's perceiving this."The Australian dollar was at around $0.6880, climbing from an earlier low around $0.6847.