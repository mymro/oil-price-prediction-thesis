Oil giant Royal Dutch Shell posted a 42 percent rise in profits in the first quarter of 2018, underpinned by a recent uptick in oil and gas prices.Net income attributable to shareholders on a current cost of supplies (CCS) basis, used as a proxy for net profit, and excluding identified items, came in at $5.322 billion from a year ago. This compared to a company-provided analyst consensus of $5.277 billion.Over the same quarter last year, net income was $3.754 billion.Here are the key first-quarter metrics: "Shell's strong earnings this quarter were underpinned by higher oil and gas prices, the continued growth and very good performance of our Integrated Gas business, and improved profitability in our Upstream business," CEO Ben van Beurden said in a statement. Shell is seen making steady progress with its divestment program, while the Anglo-Dutch firm's free-cash-flow outlook is consistent with its target to buy back at least $25 billion of shares from 2018 to 2020, van Beurden said.The world's leading oil firms are set to generate more cash in 2018 after a sustained period of cutbacks in recent years, though executives have tended to urge caution amid uncertainty over oil prices over the near and long-term. "I think the problem with the numbers this morning is that the cash flow generation was disappointing. The earnings were very strong but it didn't get pulled through into cash generation," Jason Gammel, equity analyst at Jefferies, told CNBC's "Street Signs" on Thursday. Shares of Royal Dutch Shell were trading almost 3 percent lower during mid-morning trade on Thursday. The latest figures come at a time when the environment for oil companies is dramatically improving, amid signs the energy market is rebalancing and crude futures have rallied to multi-year highs. The main driver for a recent uptick in oil prices has been a supply cut from major oil producing group OPEC and Russia, who started to withhold output in January last year. The production cuts are scheduled to continue throughout 2018.The move has helped to stabilize oil prices and support oil companies in recent quarters. Brent crude traded at $74.44 a barrel on Thursday morning, up 0.6 percent, while West Texas Intermediate (WTI) was at $68.37 a barrel, 0.4 percent higher.Shell rival BP is due to report its latest figures for the same quarter on Tuesday.